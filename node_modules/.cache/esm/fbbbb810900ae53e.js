"main";_900‍.x([["bittrex",()=>bittrex]]);let axios;_900‍.w("axios",[["default",["axios"],function(v){axios=v}]]);let Market;_900‍.w("../markets.js",[["Market",["Market"],function(v){Market=v}]]);let inspect;_900‍.w("util",[["inspect",["inspect"],function(v){inspect=v}]]);


const fs = require("fs")
 

const bittrex = {
    label: 'bittrex',
    tradingFees: 0.025,
    withdrawalFees: {
        btc:0.0005,
        eth:0.006,
        xrp:1,
        "bcc/bch":0.001,
        xlm:0.01,
        ltc:0.01,
        ada:0.2,
        trx:0.003,
        neo:0.025,
        etc:0.01,
        xem:4,
        omg:0.35,
        lsk:0.1,
        zrx:1,
    },
    async fetchMarkets(){
        let markets = []
        const apiResult = await axios.get("https://bittrex.com/api/v1.1/public/getmarkets")
        for (let remotePair of apiResult.data.result){
            const pairLabel = remotePair.MarketName
            let newMarket = Market('bittrex', pairLabel)
            newMarket.baseCurrency = pairLabel.split('-')[0].toLowerCase()
            newMarket.quoteCurrency = pairLabel.split('-')[1].toLowerCase()
            markets.push(newMarket)
        }
        return markets
    },
    async getPairPrice(pairLabel){
        await axios.get(`https://bittrex.com/Api/v2.0/pub/market/GetLatestTick?marketName=${pair.label}&tickInterval=fiveMin`)
                .then(result => {
                    if (result.data.result !== null){
                        pair.price = Number(result.data.result[0].C)
                    }
                })
    }
}




