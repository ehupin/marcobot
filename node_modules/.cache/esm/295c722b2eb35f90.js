"main";let fs;_2eb‍.w("fs",[["default",["fs"],function(v){fs=v}]]);let connectDb,clearDatabase;_2eb‍.w("./database.js",[["connectDb",["connectDb"],function(v){connectDb=v}],["clearDatabase",["clearDatabase"],function(v){clearDatabase=v}]]);



function setupDb(){
    const db = connectDb()
    clearDatabase(db)
    
    
    fs.readdir('exchanges', async (err,moduleFiles)=>{
        let exchangeModules = {}
        for (const moduleFile of moduleFiles){
            const exchangeName = moduleFile.split('.')[0]
            exchangeModules[exchangeName] = require(`./exchanges/${moduleFile}`)
        }
        _2eb‍.g.console.log(exchangeModules)
        let markets = {}
        for (let exchangeModuleName of Object.keys(exchangeModules)){
            
            const markets = await exchangeModules[exchangeModuleName][exchangeModuleName]
                                .fetchMarkets()
            for (let market of markets){
                _2eb‍.g.console.log(markets)
            }
        }
        // bittrex.bittrex.fetchMarkets()
    
    })
}


